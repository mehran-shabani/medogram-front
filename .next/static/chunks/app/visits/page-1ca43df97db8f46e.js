(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{3067:function(e,a,l){Promise.resolve().then(l.bind(l,3310))},3310:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return F}});var r=l(7437),n=l(2265),t=l(7107),s=l(9619),i=l(9327),o=l(3410),u=l(3062),c=l(5656),m=l(6387),d=l(2279),h=l(7312),p=l(6298),b=l(3464),v=l(9530),x=l(4121),f=l(5299),g=l(3460),y=l(9414),_=l(4013),j=l(5389),Z=l(7261);l(2648);var k=l(9735),C=l(2187);let w=[{label:"علائم عمومی",key:"general_symptoms",options:[{value:"fever",label:"تب و لرز"},{value:"fatigue",label:"اسهال و استفراغ"},{value:"weight_loss",label:"سر درد"},{value:"appetite_loss",label:"کاهش اشتها"},{value:"night_sweats",label:"تنگی نفس"},{value:"general_pain",label:"علائم سرماخوردگی"},{value:"swollen_lymph_nodes",label:"بدن درد"},{value:"chills",label:"دندان درد"},{value:"malaise",label:"نمیدونم مشکلم چیه!"},{value:"malaise",label:"سایر"}]},{label:"علائم عصبی",key:"neurological_symptoms",options:[{value:"headache",label:"سردرد"},{value:"dizziness",label:"سرگیجه"},{value:"seizures",label:"تشنج"},{value:"numbness",label:"بی‌حسی"},{value:"weakness",label:"ضعف عضلانی"},{value:"memory_loss",label:"از دست دادن حافظه"},{value:"speech_difficulty",label:"مشکل در تکلم"},{value:"vision_problems",label:"مشکلات بینایی"},{value:"migraine",label:"میگرن"},{value:"tremor",label:"لرزش"}]},{label:"علائم قلبی عروقی",key:"cardiovascular_symptoms",options:[{value:"chest_pain",label:"درد قفسه سینه"},{value:"palpitations",label:"تپش قلب"},{value:"shortness_of_breath",label:"تنگی نفس"},{value:"swelling",label:"ورم"},{value:"high_blood_pressure",label:"فشار خون بالا"},{value:"fatigue",label:"خستگی"},{value:"fainting",label:"غش کردن"},{value:"irregular_heartbeat",label:"ضربان قلب نامنظم"},{value:"low_blood_pressure",label:"فشار خون پایین"}]},{label:"علائم گوارشی",key:"gastrointestinal_symptoms",options:[{value:"nausea",label:"حالت تهوع"},{value:"vomiting",label:"استفراغ"},{value:"diarrhea",label:"اسهال"},{value:"constipation",label:"یبوست"},{value:"abdominal_pain",label:"درد شکم"},{value:"bloating",label:"نفخ"},{value:"heartburn",label:"سوزش سر دل"},{value:"loss_of_appetite",label:"بی‌اشتهایی"},{value:"indigestion",label:"سوءهاضمه"}]},{label:"علائم تنفسی",key:"respiratory_symptoms",options:[{value:"cough",label:"سرفه"},{value:"shortness_of_breath",label:"تنگی نفس"},{value:"wheezing",label:"خس خس سینه"},{value:"chest_tightness",label:"تنگی قفسه سینه"},{value:"sore_throat",label:"گلودرد"},{value:"runny_nose",label:"آبریزش بینی"},{value:"fever",label:"تب"},{value:"sneezing",label:"عطسه"},{value:"difficulty_breathing",label:"مشکل در تنفس"}]}],A=[{value:"taamin_ejtemaei",label:"بیمه تامین اجتماعی"},{value:"salamat_urban",label:"بیمه سلامت همگانی شهری"},{value:"salamat_isargaran",label:"بیمه سلامت همگانی ایثارگران"},{value:"salamat_karkonan",label:"بیمه سلامت کارکنان"},{value:"salamat_roostaei",label:"بیمه سلامت همگانی روستایی"},{value:"naft_gas",label:"بیمه شرکت نفت و گاز جمهوری اسلامی ایران"},{value:"niro_mosallah",label:"بیمه نیروهای مسلح"},{value:"others",label:"سایر"},{value:"none",label:"آزاد"}];var S=e=>{let{formData:a,handleChange:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{variant:"body1",sx:{mb:1,color:"gray"},children:"لطفا اطلاعات بیمار را وارد کنید."}),(0,r.jsx)(k.Z,{label:"نام کامل",name:"name",value:a.name,onChange:l,fullWidth:!0,required:!0,margin:"normal",helperText:"نام خود را وارد کنید."}),(0,r.jsx)(k.Z,{label:"کد ملی",name:"national_code",value:a.national_code,onChange:l,fullWidth:!0,required:!0,margin:"normal",helperText:"کد ملی ۱۰ رقمی خود را وارد کنید."}),(0,r.jsxs)(k.Z,{select:!0,label:"نوع بیمه",name:"insurance_type",value:a.insurance_type,onChange:l,fullWidth:!0,required:!0,margin:"normal",helperText:"لطفا نوع بیمه خود را انتخاب کنید.",children:[(0,r.jsx)(C.Z,{value:"",children:"انتخاب کنید"}),A.map(e=>(0,r.jsx)(C.Z,{value:e.value,children:e.label},e.value))]}),(0,r.jsxs)(k.Z,{select:!0,label:"نوع ویزیت",name:"urgency",value:a.urgency,onChange:l,fullWidth:!0,margin:"normal",helperText:"لطفا یکی از گزینه‌های مربوط به نوع ویزیت را انتخاب کنید.",children:[(0,r.jsx)(C.Z,{value:"prescription",children:"نسخه نویسی داروهای شما"}),(0,r.jsx)(C.Z,{value:"diet",children:"مشاوره و در خواست رژیم غذایی"}),(0,r.jsx)(C.Z,{value:"addiction",children:"مشاوره زیبایی"}),(0,r.jsx)(C.Z,{value:"online_consultation",children:"ویزیت و مشاوره آنلاین"}),(0,r.jsx)(C.Z,{value:"online_consultation",children:"مشاوره اعصاب و روان"})]})]})},W=e=>{let{formData:a,handleChange:l}=e,n=w.slice(0,2);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{variant:"body1",sx:{mb:1,color:"gray"},children:"علائم عمومی و عصبی را وارد کنید. حداقل یکی از علائم عمومی الزامی است."}),n.map(e=>(0,r.jsx)(k.Z,{select:!0,label:e.label,name:e.key,value:a[e.key],onChange:l,fullWidth:!0,margin:"normal",children:e.options.map(e=>(0,r.jsx)(C.Z,{value:e.value,children:e.label},e.value))},e.key))]})},z=e=>{let{formData:a,handleChange:l}=e,n=w.slice(2);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{variant:"body1",sx:{mb:1,color:"gray"},children:"علائم قلبی عروقی، گوارشی و تنفسی را وارد کنید (در صورت وجود). همچنین می‌توانید در صورت نیاز، توضیحات اضافه وارد نمایید."}),n.map(e=>(0,r.jsxs)(k.Z,{select:!0,label:e.label,name:e.key,value:a[e.key],onChange:l,fullWidth:!0,margin:"normal",children:[(0,r.jsx)(C.Z,{value:"",children:"هیچ کدام"}),e.options.map(e=>(0,r.jsx)(C.Z,{value:e.value,children:e.label},e.value))]},e.key)),(0,r.jsx)(k.Z,{label:"توضیحات اضافی",name:"description",value:a.description,onChange:l,fullWidth:!0,multiline:!0,rows:4,margin:"normal",helperText:"در صورت تمایل، توضیحات دلخواه خود را وارد کنید."})]})},D=e=>{let{formData:a}=e,l=(e,a)=>{if(!a)return"هیچ";let l=w[e].options.find(e=>e.value===a);return l?l.label:"هیچ"},n=A.find(e=>e.value===a.insurance_type)?.label||"مشخص نشده";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{variant:"h6",sx:{mb:2},children:"خلاصه اطلاعات و تأیید نهایی"}),(0,r.jsxs)(c.Z,{sx:{mb:2,color:"gray"},children:[(0,r.jsxs)(m.Z,{children:["نام: ",a.name]}),(0,r.jsxs)(m.Z,{children:["کد ملی: ",a.national_code]}),(0,r.jsxs)(m.Z,{children:["نوع بیمه: ",n]}),(0,r.jsxs)(m.Z,{children:["نوع ویزیت: ",a.urgency]}),(0,r.jsxs)(m.Z,{children:["علائم عمومی: ",l(0,a.general_symptoms)]}),(0,r.jsxs)(m.Z,{children:["علائم عصبی: ",l(1,a.neurological_symptoms)]}),(0,r.jsxs)(m.Z,{children:["علائم قلبی عروقی: ",l(2,a.cardiovascular_symptoms)]}),(0,r.jsxs)(m.Z,{children:["علائم گوارشی: ",l(3,a.gastrointestinal_symptoms)]}),(0,r.jsxs)(m.Z,{children:["علائم تنفسی: ",l(4,a.respiratory_symptoms)]}),a.description&&(0,r.jsxs)(m.Z,{children:["توضیحات اضافی: ",a.description]})]}),(0,r.jsx)(m.Z,{variant:"body2",sx:{color:"red"},children:"اگر تمام موارد صحیح است، روی \xabبعدی\xbb کلیک کنید."})]})},E=function(){let{token:e}=(0,n.useContext)(v.V),[a,l]=(0,n.useState)(0),[t,s]=(0,n.useState)(!1),[i,u]=(0,n.useState)({name:"",national_code:"",insurance_type:"",urgency:"prescription",general_symptoms:"",neurological_symptoms:"",cardiovascular_symptoms:"",gastrointestinal_symptoms:"",respiratory_symptoms:"",description:""}),[d,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h(!0)},[]);let p=["اطلاعات بیمار","علائم (۱/۲)","علائم (۲/۲)","تأیید و ثبت نهایی"],k=e=>{if(0===e){if(!i.name.trim())return Z.Am.error("لطفا نام را وارد کنید."),!1;if(!i.national_code.trim())return Z.Am.error("لطفا کد ملی را وارد کنید."),!1;if(!/^[0-9]{10}$/.test(i.national_code))return Z.Am.error("کد ملی باید عددی و ۱۰ رقمی باشد."),!1;if(!i.insurance_type.trim())return Z.Am.error("لطفا نوع بیمه را انتخاب کنید."),!1}else if(1===e&&!i.general_symptoms)return Z.Am.error("لطفا حداقل یکی از علائم عمومی را انتخاب کنید."),!1;return!0},C=e=>{let{name:a,value:l}=e.target;u(e=>({...e,[a]:l}))},w=async a=>{if(a.preventDefault(),k(0)&&k(1)){s(!0);try{let a=A.find(e=>e.value===i.insurance_type)?.label||"مشخص نشده",r=`کد ملی: ${i.national_code}
نوع بیمه: ${a}
${i.description}`,n={...i,description:r},t=await b.Z.post("https://api.medogram.ir/api/visit/",n,{headers:{Authorization:`Bearer ${e}`}});u({name:"",national_code:"",insurance_type:"",urgency:"prescription",general_symptoms:"",neurological_symptoms:"",cardiovascular_symptoms:"",gastrointestinal_symptoms:"",respiratory_symptoms:"",description:""}),l(0),Z.Am.success(`ویزیت برای ${t.data.name} با موفقیت ثبت شد.`)}catch(e){console.error("Error creating visit:",e),e.response&&401===e.response.status?Z.Am.error("احراز هویت ناموفق بود! لطفا دوباره وارد شوید."):Z.Am.error("خطا در ثبت ویزیت.")}finally{s(!1)}}};return(0,r.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[(0,r.jsxs)(o.Z,{elevation:3,sx:{padding:{xs:2,sm:4},width:"90%",maxWidth:600,opacity:d?1:0,transform:d?"translateY(0)":"translateY(20px)",transition:"opacity 0.5s ease-out, transform 0.5s ease-out",backgroundColor:"#ffffff",borderRadius:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)(m.Z,{variant:"h5",gutterBottom:!0,sx:{textAlign:"center",mb:3},children:"ثبت ویزیت جدید"}),(0,r.jsx)(x.Z,{activeStep:a,alternativeLabel:!0,sx:{mb:4},children:p.map(e=>(0,r.jsx)(f.Z,{children:(0,r.jsx)(g.Z,{children:e})},e))}),(0,r.jsxs)(c.Z,{component:"form",onSubmit:w,children:[(0,r.jsx)(y.ZP,{container:!0,spacing:2,children:(0,r.jsx)(y.ZP,{item:!0,xs:12,children:(e=>{switch(e){case 0:return(0,r.jsx)(S,{formData:i,handleChange:C});case 1:return(0,r.jsx)(W,{formData:i,handleChange:C});case 2:return(0,r.jsx)(z,{formData:i,handleChange:C});case 3:return(0,r.jsx)(D,{formData:i});default:return null}})(a)})}),(0,r.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[(0,r.jsx)(_.Z,{disabled:0===a,onClick:()=>{l(e=>e-1)},variant:"outlined",children:"بازگشت"}),a===p.length?(0,r.jsx)(_.Z,{variant:"contained",color:"primary",type:"submit",disabled:t,children:t?(0,r.jsx)(j.Z,{size:24,color:"inherit"}):"ثبت"}):(0,r.jsx)(_.Z,{variant:"contained",color:"primary",onClick:()=>{k(a)&&l(e=>e+1)},disabled:t,type:"button",children:"بعدی"})]})]})]}),(0,r.jsx)(Z.Ix,{})]})};let T=(0,t.Z)({palette:{primary:{main:"#00838f"},background:{default:"#e0f7fa"}},typography:{fontFamily:"Roboto, Arial, sans-serif"}}),$=e=>{let{children:a}=e;return(0,r.jsx)(i.Z,{component:p.E.div,maxWidth:"md",sx:{display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"100vh",py:4},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:a})},P=e=>{let{children:a}=e;return(0,r.jsx)(o.Z,{elevation:3,sx:{borderRadius:4,p:{xs:3,md:4},pb:0,backgroundColor:"white",display:"flex",flexDirection:"column"},children:a})};var q=()=>(0,r.jsxs)(s.Z,{theme:T,children:[(0,r.jsx)(u.ZP,{}),(0,r.jsx)($,{children:(0,r.jsxs)(P,{children:[(0,r.jsxs)(c.Z,{component:"header",sx:{textAlign:"center",mb:4},children:[(0,r.jsx)(m.Z,{variant:"h4",component:"h1",color:"primary",gutterBottom:!0,children:"زمان‌بندی ویزیت شما"}),(0,r.jsx)(m.Z,{variant:"subtitle1",color:"text.secondary",children:"برای رزرو نوبت با متخصصان سلامت ما، وقت بگیرید"})]}),(0,r.jsxs)(d.Z,{severity:"warning",sx:{mb:4,direction:"rtl",backgroundColor:"#ffecb3",color:"#bf360c","& .MuiAlert-icon":{color:"#bf360c"}},children:[(0,r.jsx)(m.Z,{variant:"body1",sx:{fontWeight:"bold",fontSize:"1.1rem",mb:1},children:"شما باید قبل از ویزیت، مبلغ یک ویزیت را در حسابتان داشته باشید!"}),(0,r.jsxs)(m.Z,{variant:"body2",children:["قیمت هر ویزیت 29,950 تومان است. لطفاً قبل از ویزیت به صفحه"," ",(0,r.jsx)(h.Z,{href:"payment-visit/",color:"inherit",underline:"always",sx:{fontWeight:"bold"},children:"پرداخت ویزیت"})," ","بروید."]})]}),(0,r.jsx)(E,{sx:{flexGrow:1,display:"flex",flexDirection:"column"}})]})})]});function F(){return(0,r.jsx)(q,{})}},9530:function(e,a,l){"use strict";l.d(a,{H:function(){return i},V:function(){return s}});var r=l(7437),n=l(2265),t=l(3464);let s=(0,n.createContext)(),i=e=>{let{children:a}=e,[l,i]=(0,n.useState)(!1),[o,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=localStorage.getItem("authToken");e&&(u(e),i(!0))},[]),(0,n.useEffect)(()=>{let e=t.Z.interceptors.request.use(e=>(o&&(e.headers.Authorization=`Bearer ${o}`),e),e=>Promise.reject(e));return()=>{t.Z.interceptors.request.eject(e)}},[o]),(0,r.jsx)(s.Provider,{value:{isVerified:l,registerUser:e=>t.Z.post("https://api.medogram.ir/api/register/",{phone_number:e}),verifyUser:(e,a)=>(console.log("Data being sent:",{phone_number:e,code:a}),t.Z.post("https://api.medogram.ir/api/verify/",{code:a,phone_number:e}).then(e=>{let a=e.data?.access;if(!a)throw Error("توکن در پاسخ سرور موجود نیست!");return i(!0),u(a),localStorage.setItem("authToken",a),a}).catch(e=>{throw console.error("Verification error:",e.response?.data),e})),token:o,logout:()=>{i(!1),u(null),localStorage.removeItem("authToken")}},children:a})}}},function(e){e.O(0,[5676,5040,6298,3464,2276,9078,4013,344,6447,6697,5548,3470,9414,6954,6105,2971,2117,1744],function(){return e(e.s=3067)}),_N_E=e.O()}]);