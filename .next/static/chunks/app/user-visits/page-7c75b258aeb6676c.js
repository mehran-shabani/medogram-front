(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5561],{4746:function(e,t,r){Promise.resolve().then(r.bind(r,2886))},2886:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(7437),i=r(2265),o=r(3464),s=r(9530),a=r(9379),c=r(6298),u=r(8614);let d=a.ZP.div.withConfig({componentId:"sc-1b90b85e-0"})(["min-height:100vh;background:linear-gradient(135deg,#e0f7fa 0%,#80deea 100%);padding:2rem;"]),l=(0,a.ZP)(c.E.div).withConfig({componentId:"sc-1b90b85e-1"})(["background:white;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,0.1);padding:2rem;max-width:800px;margin:0 auto;"]),p=a.ZP.h1.withConfig({componentId:"sc-1b90b85e-2"})(["font-size:2.5rem;color:#00838f;margin-bottom:2rem;text-align:center;"]),f=a.ZP.ul.withConfig({componentId:"sc-1b90b85e-3"})(["list-style-type:none;padding:0;"]),h=(0,a.ZP)(c.E.li).withConfig({componentId:"sc-1b90b85e-4"})(["background-color:#f5f5f5;border-radius:10px;padding:1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 5px rgba(0,0,0,0.1);"]),m=a.ZP.span.withConfig({componentId:"sc-1b90b85e-5"})(["font-size:1.2rem;color:#333;"]),g=a.ZP.span.withConfig({componentId:"sc-1b90b85e-6"})(["font-size:1rem;color:white;background-color:",";padding:0.3rem 0.8rem;border-radius:20px;"],e=>{switch(e.urgency){case"High":return"#ff4d4d";case"Medium":return"#ffa64d";default:return"#4da6ff"}}),x=a.ZP.p.withConfig({componentId:"sc-1b90b85e-7"})(["text-align:center;font-size:1.2rem;color:#666;"]),b=a.ZP.div.withConfig({componentId:"sc-1b90b85e-8"})(["border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto;@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]);var w=()=>{let{token:e}=(0,i.useContext)(s.V),[t,r]=(0,i.useState)([]),[a,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{e&&(c(!0),o.Z.get("https://api.medogram.ir/api/visit",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{r(e.data),c(!1)}).catch(e=>{console.error("Error fetching visits:",e),c(!1)}))},[e]),(0,n.jsx)(d,{children:(0,n.jsxs)(l,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,n.jsx)(p,{children:"ویزیت‌های شما"}),a?(0,n.jsx)(b,{}):t.length>0?(0,n.jsx)(f,{children:(0,n.jsx)(u.M,{children:t.map(e=>(0,n.jsxs)(h,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,n.jsx)(m,{children:e.name}),(0,n.jsx)(g,{urgency:e.urgency,children:"prescription"===e.urgency?"تجویز دارو":"diet"===e.urgency?"درمان تغذیه‌ای":"addiction"===e.urgency?"درمان اعتیاد":"مشاوره آنلاین"})]},e.id))})}):(0,n.jsx)(x,{children:"ویزیتی برای شما ثبت نشده است."})]})})};function y(){return(0,n.jsx)(w,{})}},9530:function(e,t,r){"use strict";r.d(t,{H:function(){return a},V:function(){return s}});var n=r(7437),i=r(2265),o=r(3464);let s=(0,i.createContext)(),a=e=>{let{children:t}=e,[r,a]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=localStorage.getItem("authToken");e&&(u(e),a(!0))},[]),(0,i.useEffect)(()=>{let e=o.Z.interceptors.request.use(e=>(c&&(e.headers.Authorization=`Bearer ${c}`),e),e=>Promise.reject(e));return()=>{o.Z.interceptors.request.eject(e)}},[c]),(0,n.jsx)(s.Provider,{value:{isVerified:r,registerUser:e=>o.Z.post("https://api.medogram.ir/api/register/",{phone_number:e}),verifyUser:(e,t)=>(console.log("Data being sent:",{phone_number:e,code:t}),o.Z.post("https://api.medogram.ir/api/verify/",{code:t,phone_number:e}).then(e=>{let t=e.data?.access;if(!t)throw Error("توکن در پاسخ سرور موجود نیست!");return a(!0),u(t),localStorage.setItem("authToken",t),t}).catch(e=>{throw console.error("Verification error:",e.response?.data),e})),token:c,logout:()=>{a(!1),u(null),localStorage.removeItem("authToken")}},children:t})}},8614:function(e,t,r){"use strict";r.d(t,{M:function(){return x}});var n=r(7437),i=r(2265),o=r(4252),s=r(3576),a=r(5750);class c extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:r}=e,o=(0,i.useId)(),s=(0,i.useRef)(null),u=(0,i.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,i.useContext)(a._);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:i}=u.current;if(r||!s.current||!e||!t)return;s.current.dataset.motionPopId=o;let a=document.createElement("style");return d&&(a.nonce=d),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${n}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[r]),(0,n.jsx)(c,{isPresent:r,childRef:s,sizeRef:u,children:i.cloneElement(t,{ref:s})})}let d=e=>{let{children:t,initial:r,isPresent:a,onExitComplete:c,custom:d,presenceAffectsLayout:p,mode:f}=e,h=(0,s.h)(l),m=(0,i.useId)(),g=(0,i.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;c&&c()},[h,c]),x=(0,i.useMemo)(()=>({id:m,initial:r,isPresent:a,custom:d,onExitComplete:g,register:e=>(h.set(e,!1),()=>h.delete(e))}),p?[Math.random(),g]:[a,g]);return(0,i.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[a]),i.useEffect(()=>{a||h.size||!c||c()},[a]),"popLayout"===f&&(t=(0,n.jsx)(u,{isPresent:a,children:t})),(0,n.jsx)(o.O.Provider,{value:x,children:t})};function l(){return new Map}var p=r(8881),f=r(3223);let h=e=>e.key||"";function m(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var g=r(1534);let x=e=>{let{children:t,exitBeforeEnter:r,custom:o,initial:a=!0,onExitComplete:c,presenceAffectsLayout:u=!0,mode:l="sync"}=e;(0,f.k)(!r,"Replace exitBeforeEnter with mode='wait'");let x=(0,i.useMemo)(()=>m(t),[t]),b=x.map(h),w=(0,i.useRef)(!0),y=(0,i.useRef)(x),v=(0,s.h)(()=>new Map),[C,j]=(0,i.useState)(x),[E,P]=(0,i.useState)(x);(0,g.L)(()=>{w.current=!1,y.current=x;for(let e=0;e<E.length;e++){let t=h(E[e]);b.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[E,b.length,b.join("-")]);let I=[];if(x!==C){let e=[...x];for(let t=0;t<E.length;t++){let r=E[t],n=h(r);b.includes(n)||(e.splice(t,0,r),I.push(r))}"wait"===l&&I.length&&(e=I),P(m(e)),j(x);return}let{forceRender:k}=(0,i.useContext)(p.p);return(0,n.jsx)(n.Fragment,{children:E.map(e=>{let t=h(e),r=x===E||b.includes(t);return(0,n.jsx)(d,{isPresent:r,initial:(!w.current||!!a)&&void 0,custom:r?void 0:o,presenceAffectsLayout:u,mode:l,onExitComplete:r?void 0:()=>{if(!v.has(t))return;v.set(t,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),P(y.current),c&&c())},children:e},t)})})}}},function(e){e.O(0,[6298,3464,9379,2971,2117,1744],function(){return e(e.s=4746)}),_N_E=e.O()}]);