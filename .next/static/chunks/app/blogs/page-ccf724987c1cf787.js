(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5606],{4e3:function(e,t,o){Promise.resolve().then(o.bind(o,9957))},9957:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return G}});var n=o(7437),r=o(2265),i=o(3464),a=o(9530),s=o(7261);o(2648);var c=o(9379),l=o(9089);let d=(0,c.F4)(["from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}"]),p=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-0"})(["max-width:800px;margin:0 auto;direction:rtl;padding:20px;font-family:'Vazirmatn',sans-serif;@media (max-width:768px){padding:15px;}"]),f=c.ZP.h1.withConfig({componentId:"sc-5a9ba7c9-1"})(["text-align:center;color:#2c3e50;font-size:2.5em;margin-bottom:40px;position:relative;padding-bottom:15px;&:after{content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:100px;height:3px;background:linear-gradient(to right,#3498db,#2ecc71);}@media (max-width:768px){font-size:2em;margin-bottom:30px;}"]),m=c.ZP.ul.withConfig({componentId:"sc-5a9ba7c9-2"})(["list-style-type:none;padding:0;animation:"," 0.6s ease-out;"],d),g=c.ZP.li.withConfig({componentId:"sc-5a9ba7c9-3"})(["background-color:#fff;border-radius:15px;padding:30px;margin-bottom:40px;box-shadow:0 10px 20px rgba(0,0,0,0.05);transition:all 0.3s ease;border:1px solid #eef2f7;&:hover{transform:translateY(-5px);box-shadow:0 15px 30px rgba(0,0,0,0.1);}@media (max-width:768px){padding:20px;margin-bottom:30px;}"]),u=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;"]),h=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-5"})(["display:flex;align-items:center;gap:8px;color:#34495e;svg{font-size:1.5em;color:#3498db;}"]),x=c.ZP.span.withConfig({componentId:"sc-5a9ba7c9-6"})(["font-weight:500;"]),b=c.ZP.span.withConfig({componentId:"sc-5a9ba7c9-7"})(["color:#7f8c8d;font-size:0.9em;"]),w=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-8"})(["position:relative;overflow:hidden;border-radius:12px;margin:20px 0;&::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to bottom,transparent 0%,rgba(0,0,0,0.2) 100%);opacity:0;transition:opacity 0.3s ease;}&:hover::after{opacity:1;}"]),v=c.ZP.img.withConfig({componentId:"sc-5a9ba7c9-9"})(["width:100%;height:400px;direction:rtl;object-fit:cover;transition:transform 0.3s ease;cursor:pointer;&:hover{transform:scale(1.02);}@media (max-width:768px){height:250px;}"]),y=c.ZP.h2.withConfig({componentId:"sc-5a9ba7c9-10"})(["color:#2c3e50;direction:ltr;font-size:1.8em;margin-bottom:15px;line-height:1.4;font-weight:600;@media (max-width:768px){font-size:1.5em;}"]),j=c.ZP.p.withConfig({componentId:"sc-5a9ba7c9-11"})(["color:#34495e;direction:rtl;line-height:1.8;font-size:1.1em;margin:20px 0;text-align:justify;@media (max-width:768px){font-size:1em;}"]),C=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-12"})(["display:flex;justify-content:flex-end;gap:15px;margin:20px 0;padding-top:15px;border-top:1px solid #eee;"]),P=c.ZP.button.withConfig({componentId:"sc-5a9ba7c9-13"})(["background-color:",";color:",";border:2px solid ",";padding:8px 15px;border-radius:20px;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:5px;font-weight:500;font-size:0.9em;svg{transition:transform 0.3s;}&:hover{background-color:",";color:white;transform:translateY(-2px);svg{transform:scale(1.2);}}&:active{transform:translateY(0);}"],e=>e.saved?"#2ecc71":"#fff",e=>e.saved?"#fff":"#3498db",e=>e.saved?"#2ecc71":"#3498db",e=>e.saved?"#27ae60":"#3498db"),k=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-14"})(["margin-top:30px;padding-top:20px;border-top:1px solid #eee;"]),Z=c.ZP.h3.withConfig({componentId:"sc-5a9ba7c9-15"})(["color:#2c3e50;font-size:1.3em;margin-bottom:20px;display:flex;align-items:center;gap:8px;svg{color:#3498db;}"]),I=c.ZP.ul.withConfig({componentId:"sc-5a9ba7c9-16"})(["list-style-type:none;padding:0;"]),O=c.ZP.li.withConfig({componentId:"sc-5a9ba7c9-17"})(["background-color:#f8f9fa;border:1px solid #e9ecef;border-radius:10px;padding:20px;margin-bottom:15px;transition:all 0.3s ease;&:hover{background-color:#fff;box-shadow:0 5px 15px rgba(0,0,0,0.05);transform:translateX(-5px);}"]),z=c.ZP.p.withConfig({componentId:"sc-5a9ba7c9-18"})(["color:#34495e;line-height:1.6;margin-bottom:15px;"]),S=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-19"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;"]),E=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-20"})(["display:flex;align-items:center;gap:5px;color:#7f8c8d;font-size:0.9em;svg{color:#95a5a6;}"]),A=c.ZP.span.withConfig({componentId:"sc-5a9ba7c9-21"})(["color:#95a5a6;font-size:0.85em;"]),D=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-22"})(["display:flex;gap:10px;justify-content:flex-end;"]),_=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-23"})(["margin-top:20px;animation:"," 0.3s ease-out;"],d),N=c.ZP.textarea.withConfig({componentId:"sc-5a9ba7c9-24"})(["width:100%;height:120px;padding:15px;border:2px solid #ecf0f1;border-radius:10px;resize:vertical;font-family:inherit;font-size:1em;margin-bottom:15px;transition:all 0.3s ease;&:focus{border-color:#3498db;box-shadow:0 0 0 3px rgba(52,152,219,0.1);outline:none;}"]),$=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-25"})(["display:flex;gap:10px;justify-content:flex-end;"]),T=c.ZP.button.withConfig({componentId:"sc-5a9ba7c9-26"})(["padding:10px 20px;border-radius:20px;cursor:pointer;transition:all 0.3s;font-weight:500;font-size:0.9em;border:none;&:hover{transform:translateY(-2px);}&:active{transform:translateY(0);}"]),Y=(0,c.ZP)(T).withConfig({componentId:"sc-5a9ba7c9-27"})(["background-color:#2ecc71;color:white;&:hover{background-color:#27ae60;}"]),L=(0,c.ZP)(T).withConfig({componentId:"sc-5a9ba7c9-28"})(["background-color:#e74c3c;color:white;&:hover{background-color:#c0392b;}"]),V=(0,c.ZP)(T).withConfig({componentId:"sc-5a9ba7c9-29"})(["background-color:#3498db;color:white;margin-top:15px;width:100%;&:hover{background-color:#2980b9;}"]),B=c.ZP.p.withConfig({componentId:"sc-5a9ba7c9-30"})(["text-align:center;color:#7f8c8d;font-style:italic;padding:20px;background-color:#f8f9fa;border-radius:10px;"]),H=c.ZP.p.withConfig({componentId:"sc-5a9ba7c9-31"})(["text-align:center;color:#7f8c8d;font-style:italic;font-size:1.2em;padding:40px;background-color:#f8f9fa;border-radius:10px;margin-top:30px;"]),F=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-32"})(["display:flex;justify-content:center;align-items:center;padding:40px 0;&:after{content:'';width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]),W=c.ZP.div.withConfig({componentId:"sc-5a9ba7c9-33"})(["text-align:center;color:#e74c3c;background-color:#fde8e7;padding:20px;border-radius:10px;margin:20px 0;font-size:1.1em;display:flex;align-items:center;justify-content:center;gap:10px;svg{font-size:1.5em;}"]);var q=()=>{let{isVerified:e,token:t}=(0,r.useContext)(a.V),[o,c]=(0,r.useState)([]),[d,T]=(0,r.useState)(!0),[q,G]=(0,r.useState)(null),[R,U]=(0,r.useState)(""),[X,J]=(0,r.useState)(null),[K,M]=(0,r.useState)(1),[Q,ee]=(0,r.useState)(!0),[et,eo]=(0,r.useState)(new Set),en=(0,r.useCallback)(async()=>{try{let e=await i.Z.get(`https://api.medogram.ir/api/blogs/?page=${K}`);if(e.data&&Array.isArray(e.data)){let t=e.data.filter(e=>!o.some(t=>t.id===e.id));c(e=>[...e,...t]),ee(e.data.length>0)}else if(e.data&&e.data.results){let t=e.data.results.filter(e=>!o.some(t=>t.id===e.id));c(e=>[...e,...t]),ee(null!==e.data.next)}T(!1)}catch(e){G("بارگذاری پست‌ها با خطا مواجه شد."),T(!1)}},[K,o]);(0,r.useEffect)(()=>{en()},[en]);let er=(0,r.useCallback)(()=>{window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&Q&&!d&&M(e=>e+1)},[Q,d]);(0,r.useEffect)(()=>(window.addEventListener("scroll",er),()=>window.removeEventListener("scroll",er)),[er]);let ei=async o=>{if(!e){s.Am.error("برای ارسال نظر، نیاز به احراز هویت دارید.");return}if(!R.trim()){s.Am.warning("لطفاً نظر خود را وارد کنید.");return}try{let e=await i.Z.post(`https://api.medogram.ir/api/blogs/${o}/comments/`,{comment:R},{headers:{Authorization:`Bearer ${t}`}});s.Am.success("نظر شما با موفقیت ثبت شد!"),c(t=>t.map(t=>t.id===o?{...t,comments:[...t.comments,e.data]}:t)),U(""),J(null)}catch(e){s.Am.error("خطا در ثبت نظر. لطفاً دوباره تلاش کنید.")}},ea=async(o,n)=>{if(!e){s.Am.error("برای لایک یا دیسلایک کردن، نیاز به احراز هویت دارید.");return}try{let e=await i.Z.post(`https://api.medogram.ir/api/comments/${o}/${n}/`,null,{headers:{Authorization:`Bearer ${t}`}});"like"===n?s.Am.success("نظر لایک شد!",{icon:"\uD83D\uDC4D"}):s.Am.info("نظر دیسلایک شد!",{icon:"\uD83D\uDC4E"}),c(t=>t.map(t=>({...t,comments:t.comments.map(t=>t.id===o?{...t,likes:e.data.likes}:t)})))}catch(e){s.Am.error(`خطا در ${"like"===n?"لایک":"دیسلایک"} نظر.`)}},es=t=>{if(!e){s.Am.error("برای ذخیره پست، نیاز به احراز هویت دارید.");return}eo(e=>{let o=new Set(e);return o.has(t)?(o.delete(t),s.Am.info("پست از نشان‌شده‌ها حذف شد")):(o.add(t),s.Am.success("پست در نشان‌شده‌ها ذخیره شد")),o})},ec=e=>{navigator.share?navigator.share({title:e.title,text:e.content.substring(0,100)+"...",url:window.location.href}).catch(()=>{navigator.clipboard.writeText(window.location.href),s.Am.success("لینک پست کپی شد!")}):(navigator.clipboard.writeText(window.location.href),s.Am.success("لینک پست کپی شد!"))};return d&&1===K?(0,n.jsx)(F,{}):q?(0,n.jsx)(W,{children:q}):(0,n.jsxs)(p,{children:[(0,n.jsx)(f,{children:"آخرین پست‌های وبلاگ"}),o.length>0?(0,n.jsx)(m,{children:o.map(e=>(0,n.jsxs)(g,{children:[(0,n.jsxs)(u,{children:[(0,n.jsxs)(h,{children:[(0,n.jsx)(l.m3W,{}),(0,n.jsx)(x,{children:e.author})]}),(0,n.jsx)(b,{children:new Date(e.created_at).toLocaleDateString("fa-IR")})]}),(0,n.jsx)(y,{src:{direction:"center"},children:e.title}),e.image1&&(0,n.jsx)(w,{children:(0,n.jsx)(v,{src:e.image1,alt:e.title,loading:"lazy"})}),(0,n.jsx)(j,{children:e.content}),e.image2&&(0,n.jsx)(w,{children:(0,n.jsx)(v,{src:e.image2,alt:`تصویر اضافی برای ${e.title}`,loading:"lazy"})}),(0,n.jsxs)(C,{children:[(0,n.jsxs)(P,{onClick:()=>ec(e),children:[(0,n.jsx)(l.Lrt,{})," اشتراک‌گذاری"]}),(0,n.jsxs)(P,{onClick:()=>es(e.id),saved:et.has(e.id),children:[(0,n.jsx)(l.VF9,{}),et.has(e.id)?"ذخیره شده":"ذخیره"]})]}),(0,n.jsxs)(k,{children:[(0,n.jsxs)(Z,{children:[(0,n.jsx)(l.DCG,{})," نظرات (",e.comments?.length||0,")"]}),e.comments?.length>0?(0,n.jsx)(I,{children:e.comments.map(e=>(0,n.jsxs)(O,{children:[(0,n.jsx)(z,{children:e.comment}),(0,n.jsxs)(S,{children:[(0,n.jsxs)(E,{children:[(0,n.jsx)(l.m3W,{}),(0,n.jsx)("span",{children:e.user||"کاربر مهمان"})]}),(0,n.jsx)(A,{children:new Date(e.created_at).toLocaleDateString("fa-IR")})]}),(0,n.jsxs)(D,{children:[(0,n.jsxs)(P,{onClick:()=>ea(e.id,"like"),children:[(0,n.jsx)(l.spm,{})," ",e.likes]}),(0,n.jsx)(P,{onClick:()=>ea(e.id,"dislike"),children:(0,n.jsx)(l.bGJ,{})})]})]},e.id))}):(0,n.jsx)(B,{children:"هنوز نظری ثبت نشده است."}),X===e.id?(0,n.jsxs)(_,{children:[(0,n.jsx)(N,{value:R,onChange:e=>U(e.target.value),placeholder:"نظر خود را بنویسید..."}),(0,n.jsxs)($,{children:[(0,n.jsx)(Y,{onClick:()=>ei(e.id),children:"ارسال نظر"}),(0,n.jsx)(L,{onClick:()=>{J(null),U("")},children:"انصراف"})]})]}):(0,n.jsx)(V,{onClick:()=>J(e.id),children:"افزودن نظر"})]})]},e.id))}):(0,n.jsx)(H,{children:"پستی برای نمایش وجود ندارد."}),d&&(0,n.jsx)(F,{}),(0,n.jsx)(s.Ix,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})};function G(){return(0,n.jsx)(q,{})}},9530:function(e,t,o){"use strict";o.d(t,{H:function(){return s},V:function(){return a}});var n=o(7437),r=o(2265),i=o(3464);let a=(0,r.createContext)(),s=e=>{let{children:t}=e,[o,s]=(0,r.useState)(!1),[c,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=localStorage.getItem("authToken");e&&(l(e),s(!0))},[]),(0,r.useEffect)(()=>{let e=i.Z.interceptors.request.use(e=>(c&&(e.headers.Authorization=`Bearer ${c}`),e),e=>Promise.reject(e));return()=>{i.Z.interceptors.request.eject(e)}},[c]),(0,n.jsx)(a.Provider,{value:{isVerified:o,registerUser:e=>i.Z.post("https://api.medogram.ir/api/register/",{phone_number:e}),verifyUser:(e,t)=>(console.log("Data being sent:",{phone_number:e,code:t}),i.Z.post("https://api.medogram.ir/api/verify/",{code:t,phone_number:e}).then(e=>{let t=e.data?.access;if(!t)throw Error("توکن در پاسخ سرور موجود نیست!");return s(!0),l(t),localStorage.setItem("authToken",t),t}).catch(e=>{throw console.error("Verification error:",e.response?.data),e})),token:c,logout:()=>{s(!1),l(null),localStorage.removeItem("authToken")}},children:t})}},1994:function(e,t,o){"use strict";t.Z=function(){for(var e,t,o=0,n="",r=arguments.length;o<r;o++)(e=arguments[o])&&(t=function e(t){var o,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(o=0;o<i;o++)t[o]&&(n=e(t[o]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n)}return r}(e))&&(n&&(n+=" "),n+=t);return n}},6231:function(e,t,o){"use strict";o.d(t,{w_:function(){return d}});var n=o(2265),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(r),a=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){var n,r;n=t,r=o[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function d(e){return t=>n.createElement(p,s({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,o)=>n.createElement(t.tag,l({key:o},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var o,{attr:r,size:i,title:c}=e,d=function(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;o[n]=e[n]}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}(e,a),p=i||t.size||"1em";return t.className&&(o=t.className),e.className&&(o=(o?o+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:o,style:l(l({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&n.createElement("title",null,c),e.children)};return void 0!==i?n.createElement(i.Consumer,null,e=>t(e)):t(r)}}},function(e){e.O(0,[5676,7699,3464,9379,5548,2971,2117,1744],function(){return e(e.s=4e3)}),_N_E=e.O()}]);